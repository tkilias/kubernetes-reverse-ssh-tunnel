apiVersion: v1
kind: Secret
metadata:
  name: gateway-private-key
type: Opaque
data:
  key: 
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: reverse-ssh
spec:
  selector:
    matchLabels:
      app: gateway-private-key
  template:
    metadata:
      labels:
        app: gateway-private-key
    spec:
      containers:
      - image: tkilias/kubernetes-reverse-ssh-tunnel
        name: reverse-ssh
        env:
        - name: PUBLIC_HOST_ADDR
          value: ""
        - name: PUBLIC_HOST_PORT
          value: "22"
        - name: PROXY_PORT
          value: "2222"
        - name: DESTINATION_PORT
          value: "22"
        volumeMounts:
        - name: gateway-private-key
          mountPath: "/root/private_key"
          readOnly: true
      volumes:
      - name: gateway-private-key 
        secret:
          secretName: gateway-private-key
          defaultMode: 256

        
